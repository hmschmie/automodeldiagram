# automodeldiagram
repository for script that creates a global water model diagram based on a definition of components in json-notation.
The graphical visualisations were generated by Marlo Garnsworthy (www.IcebirdStudio.com)

## modelsetup.json
This file configures the appearence of the diagrams specifically for each model. 
### model
Here, the name for the model is specified.
### items_main
Here, for the main diagram (that includes A, B and C parts) the appearance is defined with either "false" (absence, to be displayed in grey) or "true" (included, to be displayed in colour). Technically, the name of the entry (e.g. "manufacturing") is combined with the value of the entry (e.g. "false") and the corresponding figure from the folder fig_items is displayed in the diagram.

| Item                   | description: presence of                                               |
|------------------------|------------------------------------------------------------------------|
| manufacturing          | manufacturing water use sector                                         |
| irrigation             | irrigation water use sector                                            |
| livestock              | livestock water use sector                                             |
| domestic               | domestic water use sector                                              |
| electricity            | electricity water use sector                                           |
| groundwater_background | groundwater storage                                                    |
| reservoir              | reservoir storage (artificially created water bodies)                  |
| lake                   | lake storage                                                           |
| river                  | river storage                                                          |
| wetland                | wetland storage                                                        |
| ar_wateruse            | flux from water use sector "loss" to atmosphere                        |
| discharge              | discharge in model output                                              |
| ar_discharge           | arrow for discharge                                                    |
| glacier                | glacier storage                                                        |
| shortwave              | shortwave radiation used as input data                                 |
| longwave               | longwave radiation used as input data                                  |
| temperature            | air temperature used as input data                                     |
| wind                   | wind speed used as input data                                          |
| humidity               | humiditiy used as input data                                           |
| pressure               | air pressure used as input data                                        |
| precipitation          | precipitation used as input data                                       |
| ar_gw_abstraction      | water abstraction from groundwater storage to satisfy water use demand |
| ar_gw_retflow          | return flow of abstracted water to groundwater storage                 |
| ar_soil_retflow        | return flow of abstracted water to soil storage                        |
| ar_abs_lake            | water abstraction from lake storage to satisfy water use demand        |
| ar_abs_reservoir       | water abstraction from reservoir storage to satisfy water use demand   |
| ar_abs_river           | water abstraction from river storage to satisfy water use demand       |
| ar_retflow_lake        | return flow of abstracted water to lake storage                        |
| ar_retflow_reservoir   | return flow of abstracted water to reservoir storage                   |
| ar_retflow_river       | return flow of abstracted water to river storage                       |
| ar_canopy_evaporation  | evaporation from canopy storage                                        |
| ar_caprise             | cappilary rise from groundwater storage                                |
| ar_glacier_sublim      | sublmation of glacier storage                                          |
| ar_lake                | evaporation from lake storage                                          |
| ar_reservoir           | evaporation from reservoir storage                                     |
| ar_river               | evaporation from river storage                                         |
| ar_wetland             | evaporation from wetland storage                                       |
| ar_soil_evapo          | evaporation from soil storage                                          |
| ar_transpiration       | transpiration                                                          |
| ar_snow_sublim         | sublimation from snow storage                                          |
| ar_gwr                 | groundwater recharge                                                   |
| ar_infiltration        | infiltration                                                           |
| ar_throughfall         | throughfall                                                            |
| ar_glacierrunoff       | runoff from glacier storage                                            |
| ar_snowmelt            | melting / runoff from snow storage                                     |
| canopy                 | canopy storage                                                         |

### text_main
Here, for the main diagram (that includes A, B and C parts) the text colour is defined with a colour, for "false" with "#929497" and for "true" and the water use sectors "black", for water fluxes "#0445A2" and for CO2 effect considered "green". Technically, the name of the entry (e.g. "Manufacturing sector") appears in the diagram at a given position in the defined color as value. For each item there is such a text.

### items_a
Here, for the vertial water balance (the A part) the appearance is defined with either "false" (absence, to be displayed in grey) or "true" (included, to be displayed in colour). Technically, the name of the entry (e.g. "shortwave") is combined with the value of the entry (e.g. "false") and the corresponding figure from the folder fig_items is displayed in the diagram.

| Item                     | description: presence of                |
|--------------------------|-----------------------------------------|
| shortwave                | shortwave radiation used as input data  |
| longwave                 | longwave radiation used as input data   |
| temperature              | air temperature used as input data      |
| wind                     | wind speed used as input data           |
| humidity                 | humiditiy used as input data            |
| pressure                 | air pressure used as input data         |
| precipitation            | precipitation used as input data        |
| A_groundwater_background | groundwater storage                     |
| A_glacier_background     | glacier storage                         |
| A_canopy                 | canopy storage                          |
| A_ar_canopy_evaporation  | evaporation from canopy storage         |
| A_ar_transpiration       | transpiration                           |
| A_ar_soil_evapo          | evaporation from soil storage           |
| A_ar_throughfall         | throughfall                             |
| A_ar_infiltration        | infiltration                            |
| A_ar_gwr                 | groundwater recharge                    |
| A_ar_caprise             | cappilary rise from groundwater storage |
| A_gw_runoff              | groundwater runoff                      |
| A_ar_interflow           | interflow                               |
| A_ar_surf_runoff         | surface runoff                          |
| A_ar_glacierrunoff       | runoff from glacier storage             |
| A_ar_snowmelt            | melting / runoff from snow storage      |
| A_ar_snow_sublim         | sublimation from snow storage           |
| A_ar_glacier_sublim      | submlimation from glacier storage       |
| A_glacier                | glacier storage                         |
| A_groundwater            | groundwater storage                     |
| A_snow                   | snow storage                            |
| A_soil                   | soil storage                            |

### text_a
Here, for the vertial water balance (the A part) the text colour is defined with a colour, for "false" with "#929497" and for "true" for water fluxes "#0445A2" and for CO2 effect considered "green". Technically, the name of the entry (e.g. "Glacier storage") appears in the diagram at a given position in the defined color as value. For each item there is such a text.

### layers_a
Here, for the vertial water balance (the A part) the number of layers of the specific storage (soil, grounwater, glacier, snow) is appearing in the diagram. Technically, the number (and the text) appears in colour in case the value is larger than zero.

## creatediagram.py
This script contains information of positioning of elements and text defined in modelsetup.json as well as the script itself to generate the diagrams. 

### positions of the elements and status of text wrap
With hard coded pixel values, the elements defined in modelsetup.json are put to on top of the background diagram. Note that the key names need to be the same for the names in the modelsetup.json. ```posit``` defines the position of the ```items_main```, ```positx``` the additional appearance of the grey letter "X" that might help for colourdisabled people to better distinguish if an item is represented or not, ```postxt``` defines the position of the ```text_main```, ```textwrp``` defines if the displayed ```text_main``` should be wrapped (e.g. to two lines). Similar definitions follow for the A diagram. Here, also the information where the number of represented layers should be positioned.

### paste_images
Main function of the script. For each model definition, the diagrams are composed. Please see the comments in the code for more details

### start function
Reads in the modelsetup.json and loops through the json file.

# license of the font Roboto-Regular.ttf and Roboto-Medium.ttf
To create the model diagrams, the font Roboto is used, designed by Christian Robertson. 
The font was downloaded 2024-01-17 at https://fonts.google.com/specimen/Roboto/about and is licensed under the Apache License, Version 2.0.  
